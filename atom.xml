<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://zhx6.github.io</id>
    <title>皮皮虎&apos;s Blog</title>
    <updated>2021-12-29T03:44:40.098Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://zhx6.github.io"/>
    <link rel="self" href="https://zhx6.github.io/atom.xml"/>
    <subtitle>出言有尺，嬉闹有度，做事有余，说话有德。</subtitle>
    <logo>https://zhx6.github.io/images/avatar.png</logo>
    <icon>https://zhx6.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, 皮皮虎&apos;s Blog</rights>
    <entry>
        <title type="html"><![CDATA[PHP 获取每日BING图 并且缓存URL链接到本地JSON]]></title>
        <id>https://zhx6.github.io/d8K-PzlGJ/</id>
        <link href="https://zhx6.github.io/d8K-PzlGJ/">
        </link>
        <updated>2021-12-29T03:43:06.000Z</updated>
        <content type="html"><![CDATA[<p>将获取的BING图链接进行缓存，减少服务器负担，提升访问速度。</p>
<pre><code class="language-php">&lt;?php
$filename = &quot;./cache.json&quot;;
if (file_exists($filename) === false) {
    file_put_contents($filename, &quot;&quot;);
}
$handle = fopen($filename, &quot;r&quot;);
$contents = fread($handle, filesize($filename));
fclose($handle);
$contents = json_decode($contents, true);
if (filesize($filename) === 0) {
    getBingImg();
} else {
    if ($contents['time'] === date(&quot;Ymd&quot;)) {
        Header(&quot;Location: &quot; . $contents['url']);
    } else {
        getBingImg();
    }
}
function getBingImg()
{
    $str = json_decode(file_get_contents('https://cn.bing.com/HPImageArchive.aspx?format=js&amp;idx=0&amp;n=1'));
    if (isset($str-&gt;images[0])) {
        $impurely = 'https://cn.bing.com' . $str-&gt;images[0]-&gt;url;
    } else {
        $impurely = false;
    }
    if ($impurely) {
        global $contents;
        if ($contents['url'] !== $impurely) {
            global $filename;
            $data = array(
                &quot;time&quot; =&gt; date(&quot;Ymd&quot;),
                &quot;url&quot; =&gt; $impurely
            );
            $data = json_encode($data);
            file_put_contents($filename, $data);
        }
        Header(&quot;Location: &quot; . $impurely);
        exit();
    } else {
        exit('error');
    }
}
?&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[添加网页动态滚动进度条|滚动指示器]]></title>
        <id>https://zhx6.github.io/lU92bYTeX/</id>
        <link href="https://zhx6.github.io/lU92bYTeX/">
        </link>
        <updated>2021-12-29T03:40:40.000Z</updated>
        <content type="html"><![CDATA[<h2 id="代码">代码</h2>
<pre><code class="language-php">&lt;!--动态滚动进度条--&gt;
&lt;div class=&quot;scroll-line&quot; style=&quot;z-index: 999;position: fixed;height: 3px;margin-top: 0px;background-color: #6B999B;width: 0%;&quot;&gt;&lt;/div&gt;
&lt;script type=&quot;text/javascript&quot;&gt;
    $(window).scroll(function() {
        var winTop = $(window).scrollTop(), //滚动条的位置
                docHeight = $(document).height(),   //文档高度
                winHeight = $(window).height(); //窗口高度
 
        var scrolled = (winTop / (docHeight - winHeight))*100;
 
        $('.scroll-line').css('width', (scrolled + '%'));
    });
&lt;/script&gt;
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python float乘法运算小数点后会出现很多位小数问题]]></title>
        <id>https://zhx6.github.io/python-float-cheng-fa-yun-suan-xiao-shu-dian-hou-hui-chu-xian-hen-duo-wei-xiao-shu-wen-ti/</id>
        <link href="https://zhx6.github.io/python-float-cheng-fa-yun-suan-xiao-shu-dian-hou-hui-chu-xian-hen-duo-wei-xiao-shu-wen-ti/">
        </link>
        <updated>2021-12-28T17:00:24.000Z</updated>
        <content type="html"><![CDATA[<h2 id="前言">前言</h2>
<p>说实话 这问题挺艹蛋的，我调试了半天，发现是Python所有浮点数规范遵从IEEEE754二进制浮点数算术标准（ANSI/IEEE Std 754-1985），说一下我想实现什么吧，就是出价的数字</p>
<pre><code>出价 78.6
换算成程序出价是要乘个100000
真实结果：7860000
</code></pre>
<h2 id="错误代码">错误代码</h2>
<pre><code>(78 + round(random.uniform(1, 0), 2)) * 100000
</code></pre>
<h3 id="运行结果">运行结果</h3>
<pre><code>7880000.0
7816000.0
7859000.0
7834999.999999999
7820999.999999999
7859999.999999999
</code></pre>
<p>这肯定不对的啊.....<br>
后来查到一篇文章讲了这个 <a href="https://xufive.blog.csdn.net/article/details/103816159">https://xufive.blog.csdn.net/article/details/103816159</a><br>
真是太恶心了</p>
<h2 id="解决方法">解决方法</h2>
<pre><code>from decimal import *
Decimal((78 + round(random.uniform(1, 0), 2)) * 100000).quantize(Decimal('0'))
</code></pre>
<p>用了Decimal模块完美解决此问题</p>
<h3 id="结果">结果</h3>
<pre><code>7844000
7898000
7900000
7825000
7872000
7843000
7810000
7866000
7807000
7836000
7826000
7803000
7832000
7868000
7851000
7868000
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[国内开源镜像站点汇总]]></title>
        <id>https://zhx6.github.io/guo-nei-kai-yuan-jing-xiang-zhan-dian-hui-zong/</id>
        <link href="https://zhx6.github.io/guo-nei-kai-yuan-jing-xiang-zhan-dian-hui-zong/">
        </link>
        <updated>2021-12-28T16:47:09.000Z</updated>
        <content type="html"><![CDATA[<h2 id="站点版">站点版</h2>
<h3 id="企业站">企业站</h3>
<p>搜狐：<a href="http://mirrors.sohu.com/">http://mirrors.sohu.com/</a><br>
腾讯：<a href="https://mirrors.cloud.tencent.com/">https://mirrors.cloud.tencent.com/</a><br>
网易：<a href="http://mirrors.163.com/">http://mirrors.163.com/</a><br>
阿里：<a href="http://mirrors.aliyun.com/">http://mirrors.aliyun.com/</a><br>
华为：<a href="https://mirrors.huaweicloud.com/">https://mirrors.huaweicloud.com/</a></p>
<h3 id="教育站">教育站</h3>
<p>上海交通大学：<a href="http://ftp.sjtu.edu.cn/html/resources.xml">http://ftp.sjtu.edu.cn/html/resources.xml</a>（部分移动运营商出口状况不佳，无法访问）<br>
华中科技大学：<a href="http://mirror.hust.edu.cn/">http://mirror.hust.edu.cn/</a>（当前已用容量估计：4.83T）<br>
清华大学：<a href="http://mirrors.tuna.tsinghua.edu.cn/">http://mirrors.tuna.tsinghua.edu.cn/</a>（当前已用容量估计：9.8T）<br>
北京理工大学：<a href="http://mirror.bit.edu.cn/web/">http://mirror.bit.edu.cn/web/</a><br>
兰州大学：<a href="http://mirror.lzu.edu.cn/">http://mirror.lzu.edu.cn/</a><br>
中国科技大学：<a href="http://mirrors.ustc.edu.cn/">http://mirrors.ustc.edu.cn/</a>（当前已用容量估计：21.32T）<br>
大连东软信息学院：<a href="http://mirrors.neusoft.edu.cn/">http://mirrors.neusoft.edu.cn/</a>（当前已用容量估计：2.5T）<br>
东北大学：<a href="http://mirror.neu.edu.cn/">http://mirror.neu.edu.cn/</a><br>
大连理工大学：<a href="http://mirror.dlut.edu.cn/">http://mirror.dlut.edu.cn/</a><br>
哈尔滨工业大学：<a href="http://run.hit.edu.cn/html/">http://run.hit.edu.cn/html/</a>（部分联通运营商出口状况不佳，无法访问）<br>
北京交通大学：<a href="http://mirror.bjtu.edu.cn/cn/">http://mirror.bjtu.edu.cn/cn/</a><br>
中国地质大学：<a href="http://mirrors.cug.edu.cn/">http://mirrors.cug.edu.cn/</a>（当前已用容量估计：2.3T）<br>
浙江大学：<a href="http://mirrors.zju.edu.cn/">http://mirrors.zju.edu.cn/</a><br>
厦门大学：<a href="http://mirrors.xmu.edu.cn/">http://mirrors.xmu.edu.cn/</a><br>
中山大学：<a href="http://mirror.sysu.edu.cn/">http://mirror.sysu.edu.cn/</a><br>
重庆大学：<a href="http://mirrors.cqu.edu.cn/">http://mirrors.cqu.edu.cn/</a>（当前已用容量估计：3.93T）<br>
北京化工大学：<a href="http://ubuntu.buct.edu.cn/">http://ubuntu.buct.edu.cn/</a>（AndroidSDK镜像仅供校内使用，当前已用容量估计：1.72T）<br>
南阳理工学院：<a href="http://mirror.nyist.edu.cn/">http://mirror.nyist.edu.cn/</a><br>
中国科学院：<a href="http://www.opencas.org/mirrors/">http://www.opencas.org/mirrors/</a><br>
电子科技大学星辰工作室：<a href="http://mirrors.stuhome.net/">http://mirrors.stuhome.net/</a>（当前已用容量估计：1.08T）<br>
西北农林科技大学：<a href="http://mirrors.nwsuaf.edu.cn/">http://mirrors.nwsuaf.edu.cn/</a>（只做CentOS镜像，当前已用容量估计：140GB）</p>
<h3 id="其他站">其他站</h3>
<p>首都在线科技股份有限公司（英文名CapitalOnlineDataService）：<a href="http://mirrors.yun-idc.com/">http://mirrors.yun-idc.com/</a><br>
常州贝特康姆软件技术有限公司：<a href="http://centos.bitcomm.cn/">http://centos.bitcomm.cn/</a>（只做CentOS镜像，当前已用容量估计：140GB）<br>
公云PubYun（母公司为贝特康姆）：<a href="http://mirrors.pubyun.com/">http://mirrors.pubyun.com/</a><br>
中国互联网络信息中心：<a href="http://mirrors.cnnic.cn/">http://mirrors.cnnic.cn/</a>（只做Apache镜像，当前已用容量估计：120GB）</p>
<h2 id="软件版">软件版</h2>
<h3 id="操作系统类">操作系统类</h3>
<h4 id="ubuntu">Ubuntu</h4>
<p>阿里云：<a href="http://mirrors.aliyun.com/ubuntu-releases/">http://mirrors.aliyun.com/ubuntu-releases/</a><br>
网易：<a href="http://mirrors.163.com/ubuntu-releases/">http://mirrors.163.com/ubuntu-releases/</a><br>
搜狐：<a href="http://mirrors.sohu.com/ubuntu-releases/">http://mirrors.sohu.com/ubuntu-releases/</a>（搜狐在12年之后似乎不同步了）<br>
首都在线科技股份有限公司：<a href="http://mirrors.yun-idc.com/ubuntu-releases/">http://mirrors.yun-idc.com/ubuntu-releases/</a></p>
<h4 id="centos">CentOS</h4>
<p>网易：<a href="http://mirrors.163.com/centos/">http://mirrors.163.com/centos/</a><br>
搜狐：<a href="http://mirrors.sohu.com/centos/">http://mirrors.sohu.com/centos/</a><br>
阿里云：<a href="http://mirrors.aliyun.com/centos/">http://mirrors.aliyun.com/centos/</a></p>
<h4 id="tomcat-apache">Tomcat、Apache</h4>
<p>中国互联网络信息中心：<a href="http://mirrors.cnnic.cn/apache/">http://mirrors.cnnic.cn/apache/</a><br>
华中科技大学：<a href="http://mirrors.hust.edu.cn/apache/">http://mirrors.hust.edu.cn/apache/</a></p>
<h4 id="mysql">MySQL</h4>
<p>搜狐：<a href="http://mirrors.sohu.com/mysql">http://mirrors.sohu.com/mysql</a><br>
中国科技技术大学：<a href="http://mirrors.ustc.edu.cn/mysql-ftp/Downloads">http://mirrors.ustc.edu.cn/mysql-ftp/Downloads</a></p>
<h4 id="postgresql">PostgreSQL</h4>
<p>浙江大学：<a href="http://mirrors.zju.edu.cn/postgresql/">http://mirrors.zju.edu.cn/postgresql/</a></p>
<h4 id="mariadb">MariaDB</h4>
<p>中国科技技术大学：<a href="https://mirrors.ustc.edu.cn/mariadb/">https://mirrors.ustc.edu.cn/mariadb/</a></p>
<h4 id="videolan">VideoLAN</h4>
<p>大连东软信息学院：<a href="http://mirrors.neusoft.edu.cn/videolan/">http://mirrors.neusoft.edu.cn/videolan/</a><br>
中国科技大学：<a href="http://mirrors.ustc.edu.cn/videolan-ftp/">http://mirrors.ustc.edu.cn/videolan-ftp/</a></p>
<h3 id="开发工具类">开发工具类</h3>
<h4 id="eclipse">Eclipse</h4>
<p>中国科技大学：<a href="http://mirrors.ustc.edu.cn/eclipse/">http://mirrors.ustc.edu.cn/eclipse/</a><br>
东北大学B：<a href="http://mirror.neu.edu.cn/eclipse/">http://mirror.neu.edu.cn/eclipse/</a></p>
<h2 id="官方镜像列表状态地址">官方镜像列表状态地址</h2>
<p>CentOS：<a href="http://mirror-status.centos.org/#cn">http://mirror-status.centos.org/#cn</a><br>
Archlinux：<a href="https://www.archlinux.org/mirrors/status/">https://www.archlinux.org/mirrors/status/</a><br>
Ubuntu：<a href="https://launchpad.net/ubuntu/+cdmirrors">https://launchpad.net/ubuntu/+cdmirrors</a><br>
Debian：<a href="http://mirror.debian.org/status.html">http://mirror.debian.org/status.html</a><br>
FedoraLinux/FedoraEPEL：<a href="https://admin.fedoraproject.org/mirrormanager/mirrors">https://admin.fedoraproject.org/mirrormanager/mirrors</a><br>
Apache：<a href="http://www.apache.org/mirrors/#cn">http://www.apache.org/mirrors/#cn</a><br>
Cygwin：<a href="https://www.cygwin.com/mirrors.html">https://www.cygwin.com/mirrors.html</a></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Python在Linux后台运行]]></title>
        <id>https://zhx6.github.io/python-zai-linux-hou-tai-yun-xing/</id>
        <link href="https://zhx6.github.io/python-zai-linux-hou-tai-yun-xing/">
        </link>
        <updated>2021-12-28T16:32:57.000Z</updated>
        <content type="html"><![CDATA[<h2 id="前言">前言</h2>
<p>写了一个python任务脚本，需要一直运行，刚开始使用了宝塔应用管理器和python管理器，都会出现运行着就停止运行的情况，而且上面还是显示在运行着....于是打算直接使用nohup运行</p>
<h2 id="方法">方法</h2>
<ul>
<li>先进入脚本文件的根目录</li>
</ul>
<pre><code>cd /www/Python/Auto/qianchuan/jiankong
</code></pre>
<ul>
<li>使用nohup运行</li>
</ul>
<pre><code>nohup python -u main.py &gt; message.log 2&gt;&amp;1 &amp;
</code></pre>
<h2 id="解释">解释</h2>
<h3 id="nohup-和-的区别">nohup 和 &amp; 的区别</h3>
<ol>
<li>&amp;<br>
是指在后台运行，但当用户退出(挂起)的时候，命令自动也跟着退出</li>
<li>nohup</li>
</ol>
<p>运行 nohup --help<br>
Run COMMAND, ignoring hangup signals. 可以看到是“运行命令，忽略挂起信号”就是不挂断的运行，注意没有后台运行功能。</p>
<p>那么，我们可以巧妙的吧他们结合起来用就是<br>
nohup COMMAND &amp;<br>
这样就能使命令永久的在后台执行</p>
<h3 id="-u">-u</h3>
<p>python的输出进行了缓冲，导致message.log并不能够马上看到输出。<br>
为python添加-u 参数，使得python不启用缓冲。</p>
<h3 id="messagelog">message.log</h3>
<p>如果不填写的话，系统默认是写入到运行文件同位置output.out文件内，填写的话则会重定向到指定的文件</p>
<h3 id="21">2&gt;&amp;1</h3>
<ul>
<li>0 表示stdin标准输入，用户键盘输入的内容</li>
<li>1 表示stdout标准输出，输出到显示屏的内容</li>
<li>2 表示stderr标准错误，报错内容</li>
</ul>
<blockquote>
<p>2&gt;&amp;1是一个整体，&gt;左右不能有空格，即将错误内容重定向输入到标准输出中去。<br>
2&gt;&amp;1中的&amp;是为了区别文件1和1(标准输出)，假如为2&gt;1，就成了将错误内容输出到文件1中，而不是标准输出中。</p>
</blockquote>
<h2 id="其他">其他</h2>
<p>挂起后台进程以后想查看是否运行或者关闭该怎么办呢？别急，我们继续。</p>
<h2 id="查看进程">查看进程</h2>
<pre><code>ps aux | grep main.py
</code></pre>
<p><img src="https://zhx6.github.io/post-images/1640709726260.png" alt="查看进程PID" loading="lazy"><br>
main.py 是运行的文件<br>
可以看到PID是12526</p>
<h2 id="关闭进程">关闭进程</h2>
<pre><code>kill -9 12526
</code></pre>
<h2 id="实时追踪文件输出到屏幕">实时追踪文件输出到屏幕</h2>
<pre><code>tailf message.log
</code></pre>
]]></content>
    </entry>
</feed>